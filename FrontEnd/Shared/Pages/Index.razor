@page "/"
@using FrontEnd.Features.Category.StateManagment.Actions.TopCategoryActions;
@using FrontEnd.Features.Category.StateManagment.States;
@using FrontEnd.Features.Category.Component;
@using FrontEnd.Features.Goods.StateManagment.States;
@using FrontEnd.Features.Goods.Component;
@using FrontEnd.Shared.Components
@using SharedModels.Models.RespondModels.Response;
@inject IState<CategoryState> CategoryState
@inject IState<GoodState> GoodState
@inject IDispatcher Dispatcher
@inherits Fluxor.Blazor.Web.Components.FluxorComponent

<PageTitle>Shop</PageTitle>

<ModalComponent @ref="modal">
    <CategoriesModalComponent UpdateId="null"
        ToggleModal="CloseModal"></CategoriesModalComponent>
</ModalComponent>

<div class="content">
    <div class="categories__block">

        <button class="categories__add" @onclick="OpenModal">Открыть модальное окно</button>
        <CategoryListComponent Categories="CategoryState.Value.Categories" />

    </div>
    <div class="goods__block " style="display: @(GoodState.Value.Goods is null ? "none" : "flex")">
        <h1>
            Category: @(GoodState.Value.Goods is not null? GoodState.Value.Goods.First().CategoryName: "")
        </h1>

        <GoodsTableComponent @ref="goodsTable" CategoryIdParam="GoodState.Value.Goods is not null?
                                                GoodState.Value.Goods.First().CategoryId: 0" />
    </div>
</div>



